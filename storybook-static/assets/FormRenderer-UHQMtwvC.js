import{c as v,r as u,j as s}from"./iframe-Dk93WtSj.js";import{B as y}from"./Button-auj1VVWt.js";import"./styles-CLsdkOxy.js";function g({formId:t}){const a=v(t),[i,c]=u.useState("idle"),[m,p]=u.useState(()=>a.fields.reduce((e,r)=>(e[r.id]="",e),{})),[h,x]=u.useState({}),l=u.useId();if(!a)return null;const b=()=>{const e={};return a.fields.forEach(r=>{const n=m[r.id]?.trim()??"";r.required&&!n&&(e[r.id]="Este campo es requerido"),r.minLength&&n.length<r.minLength&&(e[r.id]=`Mínimo ${r.minLength} caracteres`),r.type==="email"&&n&&(/\S+@\S+\.\S+/.test(n)||(e[r.id]="Email inválido"))}),x(e),Object.keys(e).length===0},_=e=>{if(e.preventDefault(),!b()){c("error");return}c("success")};return s.jsxs("form",{className:"ds-form","aria-describedby":`${l}-status`,onSubmit:_,children:[a.fields.map(e=>{const r=h[e.id],n={id:`${l}-${e.id}`,name:e.id,value:m[e.id],onChange:d=>p(j=>({...j,[e.id]:d.target.value})),"aria-invalid":!!r,"aria-describedby":r?`${l}-${e.id}-error`:void 0,required:e.required};return s.jsxs("div",{className:"ds-form__field",children:[s.jsx("label",{className:"ds-form__label",htmlFor:n.id,children:o(e.label)}),S(e,n),e.placeholder?s.jsx("p",{className:"ds-form__helper",children:o(e.placeholder)}):null,r?s.jsx("span",{className:"ds-form__error",id:`${l}-${e.id}-error`,role:"alert",children:r}):null]},e.id)}),s.jsxs("div",{role:"status",id:`${l}-status`,"aria-live":"polite",children:[i==="success"?o(a.submit.successMessage):null,i==="error"?o(a.submit.errorMessage):null]}),s.jsx(y,{type:"submit",variant:"primary",children:o(a.submit.label)})]})}function o(t){return t?t.replace(/^\{|\}$/g,"").replace(/^[^:]+:\s*/,""):""}function S(t,a){const i=t.type==="textarea"?"ds-form__textarea":t.type==="select"?"ds-form__select":"ds-form__input";return t.type==="textarea"?s.jsx("textarea",{className:i,rows:4,...a}):t.type==="select"?s.jsxs("select",{className:i,...a,children:[s.jsx("option",{value:"",children:"Selecciona una opción"}),t.options?.map(c=>s.jsx("option",{value:o(c),children:o(c)},c))]}):s.jsx("input",{className:i,type:t.type==="email"?"email":"text",...a})}g.__docgenInfo={description:"",methods:[],displayName:"FormRenderer",props:{formId:{required:!0,tsType:{name:"unknown"},description:""}}};export{g as F};
